<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post-Doc Engineering Sketch</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #f0f0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Courier New', Courier, monospace;
        }

        .container {
            position: relative;
            width: 80%; /* Adjust size as needed */
            height: auto;
            max-width: 1200px;
            max-height: 90vh;
        }

        #baseImage {
            width: 100%;
            height: auto;
            display: block;
        }

        #overlayCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .annotation-text {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.85);
            border: 1px solid #333;
            padding: 5px 10px;
            border-radius: 4px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            font-size: 14px;
        }

        .visible {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .annotation-text {
                font-size: 10px;
                padding: 3px 6px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <img id="baseImage" src="uploaded:image_1f7a5a.png-2c2ca6dc-e954-4ebc-b1be-409c2bf8a9c7" alt="Artistic Engineering Sketch">
        <canvas id="overlayCanvas"></canvas>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.querySelector('.container');
            const baseImage = document.getElementById('baseImage');
            const canvas = document.getElementById('overlayCanvas');
            const ctx = canvas.getContext('2d');
            
            // Wait for the image to load to get its natural dimensions
            baseImage.onload = () => {
                // Match canvas dimensions to the image's displayed dimensions
                canvas.width = baseImage.offsetWidth;
                canvas.height = baseImage.offsetHeight;
                
                // Define the hot spots and their annotations
                const annotations = [
                    {
                        name: "Scythe Axle",
                        coords: { x: 0.1, y: 0.55, width: 0.08, height: 0.15 },
                        text: "Rotational Kinematic Analysis"
                    },
                    {
                        name: "Horse Body",
                        coords: { x: 0.45, y: 0.4, width: 0.1, height: 0.2 },
                        text: "Dynamic Mass Distribution (DMD)"
                    },
                    {
                        name: "Chariot Wheel",
                        coords: { x: 0.7, y: 0.55, width: 0.08, height: 0.15 },
                        text: "Moment of Inertia Calculation"
                    },
                    {
                        name: "Connecting Pole",
                        coords: { x: 0.2, y: 0.48, width: 0.4, height: 0.05 },
                        text: "Tensile & Compressive Stress Analysis"
                    }
                ];

                let currentAnnotation = null;

                function drawAnnotations(hoveringName = null) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.lineWidth = 1.5;
                    ctx.strokeStyle = '#226022';
                    ctx.fillStyle = '#226022';

                    annotations.forEach(anno => {
                        const { x, y, width, height } = anno.coords;
                        const rectX = x * canvas.width;
                        const rectY = y * canvas.height;
                        const rectWidth = width * canvas.width;
                        const rectHeight = height * canvas.height;

                        // Highlight the hovering element
                        if (anno.name === hoveringName) {
                            ctx.beginPath();
                            ctx.rect(rectX, rectY, rectWidth, rectHeight);
                            ctx.strokeStyle = '#007BFF';
                            ctx.lineWidth = 2;
                            ctx.stroke();
                        }
                    });
                }

                // Mouse move listener for interactivity
                canvas.addEventListener('mousemove', (e) => {
                    const rect = canvas.getBoundingClientRect();
                    const mouseX = e.clientX - rect.left;
                    const mouseY = e.clientY - rect.top;

                    let newAnnotation = null;

                    annotations.forEach(anno => {
                        const { x, y, width, height } = anno.coords;
                        const rectX = x * canvas.width;
                        const rectY = y * canvas.height;
                        const rectWidth = width * canvas.width;
                        const rectHeight = height * canvas.height;

                        if (mouseX > rectX && mouseX < rectX + rectWidth &&
                            mouseY > rectY && mouseY < rectY + rectHeight) {
                            newAnnotation = anno;
                        }
                    });

                    if (newAnnotation !== currentAnnotation) {
                        currentAnnotation = newAnnotation;
                        drawAnnotations(currentAnnotation ? currentAnnotation.name : null);
                        
                        // Update floating text element
                        let textElement = document.getElementById('annotationText');
                        if (!textElement) {
                            textElement = document.createElement('div');
                            textElement.id = 'annotationText';
                            textElement.className = 'annotation-text';
                            document.body.appendChild(textElement);
                        }

                        if (currentAnnotation) {
                            textElement.textContent = currentAnnotation.text;
                            textElement.style.left = `${e.pageX + 10}px`;
                            textElement.style.top = `${e.pageY + 10}px`;
                            textElement.classList.add('visible');
                        } else {
                            textElement.classList.remove('visible');
                        }
                    }
                });
            };

            // Ensure the canvas and image resize together
            window.addEventListener('resize', () => {
                if (baseImage.complete) {
                    canvas.width = baseImage.offsetWidth;
                    canvas.height = baseImage.offsetHeight;
                    drawAnnotations(null);
                }
            });
        });
    </script>

</body>
</html>
